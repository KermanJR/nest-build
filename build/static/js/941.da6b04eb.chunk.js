"use strict";(self.webpackChunknest_rental=self.webpackChunknest_rental||[]).push([[941],{25206:function(e,n,t){t.d(n,{Z:function(){return $}});var r=t(74165),o=t(15861),i=t(93433),a=t(29439),s=t(72791),l=t(30960),c=t(26098),d=t.n(c),u=t(56355),h=t(13967),x=t(57621),p=t(64554),f=t(9585),Z=t(68096),j=t(94721),g=t(39281),v=t(79836),m=t(56890),y=t(35855),b=t(53994),k=t(53382),C=t(94454),P=t(20890),w=t(70493),W=t(13400),S=t(97513),_=t(34045),E=t(91183),z=t(72426),B=t.n(z),I=t(24518),M=t(71715),D=t(66934),A=t(68036),F=t(74934),O=t(80184),R=(0,D.ZP)(I.Z)((function(e){var n=e.theme;return"\n     background: ".concat(n.colors.error.main,";\n     color: ").concat(n.palette.error.contrastText,";\n\n     &:hover {\n        background: ").concat(n.colors.error.dark,";\n     }\n    ")}));var T=function(){var e=(0,s.useState)(!1),n=(0,a.Z)(e,2),t=n[0],r=n[1],o=(0,s.useRef)(null);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(p.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,O.jsxs)(p.Z,{display:"flex",alignItems:"center",children:[(0,O.jsx)(P.Z,{variant:"h5",color:"text.secondary",children:"A\xe7\xf5es:"}),(0,O.jsx)(R,{sx:{ml:1},startIcon:(0,O.jsx)(A.Z,{}),variant:"contained",children:"Excluir"})]}),(0,O.jsx)(W.Z,{color:"primary",onClick:function(){r(!0)},ref:o,sx:{ml:2,p:1},children:(0,O.jsx)(F.Z,{})})]}),(0,O.jsx)(M.Z,{keepMounted:!0,anchorEl:o.current,open:t,onClose:function(){r(!1)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}})]})},V=t(39126),q=t(5229),G=function(e){var n=e.orders,t=e.panel,c=(0,s.useState)([]),z=(0,a.Z)(c,2),I=z[0],M=z[1],D=I.length>0,A=(0,s.useState)(0),F=(0,a.Z)(A,2),R=F[0],G=F[1],$=(0,s.useState)(5),H=(0,a.Z)($,2),J=H[0],K=H[1],L=(0,s.useCallback)((function(){var e=_.P6.json_to_sheet(n),t=_.P6.book_new();_.P6.book_append_sheet(t,e,"Data"),(0,_.Fv)(t,"Pedidos.xlsx")}),[n]),N=function(e){return e.filter((function(e){return!0}))}(n),Q=function(e,n,t){return e.slice(n*t,n*t+t)}(N,R,J),U=(I.length>0&&(I.length,n.length),I.length,n.length,(0,h.Z)()),X=(0,s.useState)({}),Y=(0,a.Z)(X,2),ee=Y[0],ne=Y[1],te=(0,s.useState)([]),re=(0,a.Z)(te,2),oe=(re[0],re[1],(0,s.useState)(!1)),ie=(0,a.Z)(oe,2),ae=ie[0],se=ie[1],le=(0,s.useState)(""),ce=(0,a.Z)(le,2),de=ce[0];ce[1];function ue(){return ue=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!ae),ne(null),e.next=4,l.hi.get("/pedidos/".concat(n));case 4:t=e.sent,o=t.data,ne(o?{data:o}:null);case 7:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function he(){return he=(0,o.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.Z.get("/clicksign/get-status-document/".concat(n),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.data.data.document.status})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}return(0,s.useEffect)((function(){!function(e){he.apply(this,arguments)}(de)}),[de]),(0,O.jsxs)(x.Z,{children:[D&&(0,O.jsx)(p.Z,{flex:1,p:2,children:(0,O.jsx)(T,{})}),!D&&(0,O.jsx)(f.Z,{action:(0,O.jsxs)(p.Z,{width:150,children:[(0,O.jsx)(Z.Z,{fullWidth:!0,variant:"outlined"}),(0,O.jsx)(u.veA,{onClick:L,style:{textAlign:"right",position:"relative",left:"7rem",height:"25px",width:"25px",cursor:"pointer"}})]}),title:t?"Pedidos recentes":"Pedidos cadastrados"}),(0,O.jsx)(j.Z,{}),(0,O.jsx)(g.Z,{children:(0,O.jsxs)(v.Z,{children:[(0,O.jsx)(m.Z,{children:(0,O.jsxs)(y.Z,{children:[(0,O.jsx)(b.Z,{}),(0,O.jsx)(b.Z,{children:"Empresa"}),(0,O.jsx)(b.Z,{children:"Contato"}),(0,O.jsx)(b.Z,{children:"In\xedcio e Devolu\xe7\xe3o"}),(0,O.jsx)(b.Z,{align:"right",children:"Valor"}),(0,O.jsx)(b.Z,{align:"right",children:"Status"}),(0,O.jsx)(b.Z,{align:"right",children:"A\xe7\xf5es"})]})}),(0,O.jsx)(k.Z,{children:Q.map((function(e){var n,t,r=I.includes(e.id);return(0,O.jsxs)(y.Z,{hover:!0,selected:r,children:[(0,O.jsx)(b.Z,{padding:"checkbox",children:(0,O.jsx)(C.Z,{color:"primary",checked:r,onChange:function(n){return function(e,n){I.includes(n)?M((function(e){return e.filter((function(e){return e!==n}))})):M((function(e){return[].concat((0,i.Z)(e),[n])}))}(0,e.id)},value:r})}),(0,O.jsx)(b.Z,{children:(0,O.jsx)(P.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:null===e||void 0===e||null===(n=e.cliente)||void 0===n?void 0:n.razao_social})}),(0,O.jsx)(b.Z,{children:(0,O.jsx)(P.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:null===e||void 0===e||null===(t=e.cliente)||void 0===t?void 0:t.email})}),(0,O.jsxs)(b.Z,{children:[(0,O.jsx)(P.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:B()(e.data_inicio).utc().format("DD/MM/yyyy")}),(0,O.jsx)(P.Z,{variant:"body1",fontWeight:"bold",color:"text.secondary",gutterBottom:!0,noWrap:!0,children:B()(e.data_entrega).utc().format("DD/MM/yyyy")})]}),(0,O.jsxs)(b.Z,{align:"right",children:[(0,O.jsx)(P.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0}),(0,O.jsxs)(P.Z,{variant:"body2",color:"text.secondary",noWrap:!0,children:["R$",d()(e.vr_total).format("0,0.00")]})]}),(0,O.jsxs)(b.Z,{align:"right",children:[(0,O.jsx)(P.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0}),(0,O.jsxs)(P.Z,{variant:"body2",color:"text.secondary",noWrap:!0,children:["encerrado"===(null===e||void 0===e?void 0:e.status)&&(0,O.jsx)("p",{style:{color:"red",fontSize:".875rem",fontWeight:"bold"},children:"Encerrado"}),"aberto"===(null===e||void 0===e?void 0:e.status)&&(0,O.jsx)("p",{style:{color:"green",fontSize:".875rem",fontWeight:"bold"},children:"Em aberto"})]})]}),(0,O.jsx)(b.Z,{align:"right",children:(0,O.jsx)(w.Z,{title:"Visualizar pedido",arrow:!0,children:(0,O.jsx)(W.Z,{sx:{"&:hover":{background:U.colors.primary.lighter},color:U.palette.primary.main},color:"inherit",size:"small",onClick:function(n){return function(e){return ue.apply(this,arguments)}(null===e||void 0===e?void 0:e.id)},children:(0,O.jsx)(V.rCC,{style:{width:"20px",height:"20px"}})})})})]},e.id)}))})]})}),(0,O.jsx)(p.Z,{p:2,children:(0,O.jsx)(S.Z,{component:"div",count:N.length,onPageChange:function(e,n){G(n)},onRowsPerPageChange:function(e){K(parseInt(e.target.value))},page:R,rowsPerPage:J,rowsPerPageOptions:[5,10,25,30]})}),ee&&ae&&(0,O.jsx)(E.F,{openModal:ae,setModal:se,data:ee,edit:!0})]})};G.defaultProps={orders:[]};var $=G},13541:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(6907),o=t(29439),i=t(61889),a=t(20890),s=t(72791),l=t(5167),c=t(80184);var d=function(){var e=(0,s.useContext)(l.S).usuario,n=s.useState(!1),t=(0,o.Z)(n,2);return t[0],t[1],(0,c.jsx)(i.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:(0,c.jsxs)(i.ZP,{item:!0,children:[(0,c.jsx)(a.Z,{variant:"h3",component:"h3",gutterBottom:!0,children:"Pedidos"}),(0,c.jsxs)(a.Z,{variant:"subtitle2",children:[1===(null===e||void 0===e?void 0:e.id_perfil)&&(0,c.jsx)("label",{children:"Cadastre novos pedidos da sua empresa."}),2===(null===e||void 0===e?void 0:e.id_perfil)&&(0,c.jsx)("label",{children:"Consulte novos pedidos da sua empresa."}),3===(null===e||void 0===e?void 0:e.id_perfil)&&(0,c.jsxs)("label",{children:[null===e||void 0===e?void 0:e.nome_fantasia,", consulte novos pedidos da sua empresa."]})]})]})})},u=t(68418),h=t(91614),x=t(74165),p=t(15861),f=t(57621),Z=t(5229),j=t(25206);var g=function(){var e=(0,s.useState)([]),n=(0,o.Z)(e,2),t=n[0],r=n[1],i=(0,s.useContext)(l.S).usuario;function a(){return(a=(0,p.Z)((0,x.Z)().mark((function e(){var n,t;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.Z.get("/pedidos/dashboard/".concat(null===i||void 0===i?void 0:i.id));case 2:n=e.sent,t=n.data,r(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,s.useEffect)((function(){!function(){a.apply(this,arguments)}()}),[]),(0,c.jsx)(f.Z,{children:t?(0,c.jsx)(j.Z,{orders:t||[],panel:!0}):""})};var v=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.ql,{children:(0,c.jsx)("title",{children:"Vendas - Pedidos"})}),(0,c.jsx)(u.Z,{children:(0,c.jsx)(d,{})}),(0,c.jsx)(h.Z,{maxWidth:"lg",children:(0,c.jsx)(i.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,children:(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(g,{})})})})]})}}}]);
//# sourceMappingURL=941.da6b04eb.chunk.js.map