"use strict";(self.webpackChunknest_rental=self.webpackChunknest_rental||[]).push([[752],{68418:function(e,t,n){var r=n(66934),a=n(64554),o=n(91614),i=n(80184),s=(0,r.ZP)(a.Z)((function(e){var t=e.theme;return"\n        padding: ".concat(t.spacing(4),";\n")}));t.Z=function(e){var t=e.children;return(0,i.jsx)(s,{className:"MuiPageTitle-wrapper",children:(0,i.jsx)(o.Z,{maxWidth:"lg",children:t})})}},83752:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var r=n(6907),a=n(29439),o=n(72791),i=n(61889),s=n(20890),c=n(24518),l=n(74696),d=n(74165),u=n(15861),h=n(98243),x=n(78820),p=n(5229),f=n(88315),Z=n(39709),g=n(97438),m=n(5167),v=n(80184),j=function(e){var t=e.openModal,n=e.setModal,r=e.data,i=e.edit,s=(0,o.useState)(""),c=(0,a.Z)(s,2),l=c[0],j=c[1],_=(0,o.useState)(""),y=(0,a.Z)(_,2),C=y[0],w=y[1],k=(0,o.useState)(""),b=(0,a.Z)(k,2),S=b[0],M=b[1],P=(0,o.useState)(!1),B=(0,a.Z)(P,2),z=B[0],E=B[1],D=(0,o.useState)(""),I=(0,a.Z)(D,2),T=I[0],L=I[1],N=(0,o.useState)(""),W=(0,a.Z)(N,2),A=W[0],F=W[1],H=(0,o.useContext)(m.S).usuario;function V(){return(V=(0,u.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),E(!0),p.Z.put("/categorias/".concat(S),{descricao:l}).then((function(e){202==e.status&&L("Categoria editada com sucesso")})).catch((function(e){return F("Erro no servidor, por favor, tente novamente.")})),E(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=(0,u.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),E(!0),p.Z.post("/categorias",{descricao:C}).then((function(e){202==e.status&&L("Categoria criada com sucesso")})).catch((function(e){return F("Erro no servidor, por favor, tente novamente.")})),E(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.useEffect)((function(){r&&(j(null===r||void 0===r?void 0:r.descricao),M(null===r||void 0===r?void 0:r.id))}),[r]),(0,v.jsx)(v.Fragment,{children:t&&(0,v.jsxs)("div",{className:h.Z.modalCategory,style:{backgroundColor:"rgb(255, 255, 255)"},children:[(0,v.jsx)("div",{className:h.Z.modal__divCloseButton,children:(0,v.jsx)("button",{className:h.Z.modal__divCloseButton__closeButton,onClick:function(e){return n(!t)},children:(0,v.jsx)(x.LHV,{})})}),(0,v.jsx)(f.D,{children:"Nova categoria"}),(0,v.jsxs)("form",{onSubmit:i?function(e){return V.apply(this,arguments)}:function(e){return q.apply(this,arguments)},children:[(0,v.jsx)("div",{style:{marginTop:"1rem"},children:(0,v.jsx)(g.Z,{id:"category_name",type:"text",label:"Nome da categoria",fullWidth:!0,required:!0,color:"primary",placeholder:"Digite o nome da categoria",onChange:i?function(e){return j(e.target.value)}:function(e){return w(e.target.value)},value:i?l:C})}),3===(null===H||void 0===H?void 0:H.id_perfil)?"":(0,v.jsxs)("div",{style:{display:"flex",gridGap:"1rem",alignItems:"center",marginTop:"1rem"},children:[i?(0,v.jsx)(Z.Z,{color:"primary",type:"submit",variant:"contained",size:"medium",loading:!!z,children:"Editar"}):(0,v.jsx)(Z.Z,{color:"primary",type:"submit",variant:"contained",size:"medium",loading:!!z,children:"Cadastrar"}),(0,v.jsx)(Z.Z,{color:"warning",size:"medium",variant:"contained",onClick:function(e){return n(!t)},children:"Cancelar"})]}),(0,v.jsxs)("div",{children:[!z&&T&&(0,v.jsx)("p",{style:{color:"green"},children:T}),!z&&A&&(0,v.jsx)("p",{style:{color:"red"},children:A})]})]})]})})};var _=function(){var e=o.useState(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1],d=(0,o.useContext)(m.S).usuario;return(0,v.jsxs)(i.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,v.jsxs)(i.ZP,{item:!0,children:[(0,v.jsx)(s.Z,{variant:"h3",component:"h3",gutterBottom:!0,children:"Categorias"}),(0,v.jsx)(s.Z,{variant:"subtitle2",children:"Cadastre novas categorias para os produtos da sua empresa"})]}),(0,v.jsx)(i.ZP,{item:!0,children:3===(null===d||void 0===d?void 0:d.id_perfil)?"":(0,v.jsx)(c.Z,{sx:{mt:{xs:2,md:0}},variant:"contained",startIcon:(0,v.jsx)(l.Z,{fontSize:"small"}),style:{backgroundColor:"rgb(18, 80, 130)"},onClick:function(e){return r(!n)},children:"Cadastrar categoria"})}),(0,v.jsx)(j,{setModal:r,openModal:n,data:"",edit:!1})]})},y=n(68418),C=n(91614),w=n(57621),k=n(93433),b=n(30960),S=n(13967),M=n(64554),P=n(9585),B=n(94721),z=n(39281),E=n(79836),D=n(56890),I=n(35855),T=n(53994),L=n(53382),N=n(94454),W=n(70493),A=n(13400),F=n(97513),H=n(34045),V=n(31675),q=n(71715),O=n(66934),G=n(68036),R=n(74934),Y=(0,O.ZP)(c.Z)((function(e){var t=e.theme;return"\n     background: ".concat(t.colors.error.main,";\n     color: ").concat(t.palette.error.contrastText,";\n\n     &:hover {\n        background: ").concat(t.colors.error.dark,";\n     }\n    ")}));var K=function(e){var t=e.id_category,n=(0,o.useState)(!1),r=(0,a.Z)(n,2),i=r[0],c=r[1],l=(0,o.useRef)(null),h=(0,o.useState)(!1),x=(0,a.Z)(h,2),p=(x[0],x[1]),f=(0,o.useState)(""),Z=(0,a.Z)(f,2),g=(Z[0],Z[1]),m=function(){var e=(0,u.Z)((0,d.Z)().mark((function e(n){var r,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),n.preventDefault(),r=fetch("https://nestrental.com.br:80/api/categorias/".concat(t[0]),{method:"DELETE"}),e.next=5,r;case 5:return a=e.sent,e.next=8,a.json();case 8:e.sent,g("Categoria exclu\xedda com sucesso."),window.location.reload();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(M.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,v.jsxs)(M.Z,{display:"flex",alignItems:"center",children:[(0,v.jsx)(s.Z,{variant:"h5",color:"text.secondary",children:"A\xe7\xf5es:"}),(0,v.jsx)(Y,{sx:{ml:1},startIcon:(0,v.jsx)(G.Z,{}),variant:"contained",onClick:function(e){return m(e)},children:"Excluir"})]}),(0,v.jsx)(A.Z,{color:"primary",onClick:function(){c(!0)},ref:l,sx:{ml:2,p:1},children:(0,v.jsx)(R.Z,{})})]}),(0,v.jsx)(q.Z,{keepMounted:!0,anchorEl:l.current,open:i,onClose:function(){c(!1)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}})]})},X=n(56355),J=function(e){var t=e.categories,n=(0,o.useState)([]),r=(0,a.Z)(n,2),i=r[0],c=r[1],l=i.length>0,h=(0,o.useState)(0),x=(0,a.Z)(h,2),p=x[0],f=x[1],Z=(0,o.useState)(5),g=(0,a.Z)(Z,2),m=g[0],_=g[1],y=(0,o.useCallback)((function(){var e=H.P6.json_to_sheet(t),n=H.P6.book_new();H.P6.book_append_sheet(n,e,"Data"),(0,H.Fv)(n,"Categorias.xlsx")}),[t]),C=function(e){return e.filter((function(e){return!0}))}(t),q=function(e,t,n){return e.slice(t*n,t*n+n)}(C,p,m),O=(i.length>0&&(i.length,t.length),i.length,t.length,(0,S.Z)()),G=(0,o.useState)([]),R=(0,a.Z)(G,2),Y=R[0],J=R[1],Q=(0,o.useState)([]),U=(0,a.Z)(Q,2),$=(U[0],U[1],(0,o.useState)(!1)),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1];function re(){return re=(0,u.Z)((0,d.Z)().mark((function e(t){var n,r;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!te),J(null),e.next=4,b.hi.get("/categorias/".concat(t));case 4:n=e.sent,r=n.data,J(r||null);case 7:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}return(0,v.jsxs)(w.Z,{children:[l&&(0,v.jsx)(M.Z,{flex:1,p:2,children:(0,v.jsx)(K,{id_category:i})}),!l&&(0,v.jsx)(P.Z,{action:(0,v.jsx)(M.Z,{width:150,children:(0,v.jsx)(X.veA,{onClick:y,style:{textAlign:"right",position:"relative",left:"7rem",height:"25px",width:"25px",cursor:"pointer"}})}),title:"Categorias cadastradas"}),(0,v.jsx)(B.Z,{}),(0,v.jsx)(z.Z,{children:(0,v.jsxs)(E.Z,{children:[(0,v.jsx)(D.Z,{children:(0,v.jsxs)(I.Z,{children:[(0,v.jsx)(T.Z,{}),(0,v.jsx)(T.Z,{children:"Detalhes categoria"}),(0,v.jsx)(T.Z,{children:"ID categoria"}),(0,v.jsx)(T.Z,{align:"right",children:"A\xe7\xf5es"})]})}),(0,v.jsx)(L.Z,{children:q.map((function(e){var t=i.includes(e.id);return(0,v.jsxs)(I.Z,{hover:!0,selected:t,children:[(0,v.jsx)(T.Z,{padding:"checkbox",children:(0,v.jsx)(N.Z,{color:"primary",checked:t,onChange:function(t){return function(e,t){i.includes(t)?c((function(e){return e.filter((function(e){return e!==t}))})):c((function(e){return[].concat((0,k.Z)(e),[t])}))}(0,e.id)},value:t})}),(0,v.jsx)(T.Z,{children:(0,v.jsx)(s.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.descricao})}),(0,v.jsx)(T.Z,{children:(0,v.jsx)(s.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.id})}),(0,v.jsx)(T.Z,{align:"right",children:(0,v.jsx)(W.Z,{title:"Editar categoria",arrow:!0,children:(0,v.jsx)(A.Z,{sx:{"&:hover":{background:O.colors.primary.lighter},color:O.palette.primary.main},color:"inherit",size:"small",onClick:function(t){return function(e){return re.apply(this,arguments)}(e.id)},children:(0,v.jsx)(V.Z,{fontSize:"small"})})})})]},e.id)}))})]})}),(0,v.jsx)(M.Z,{p:2,children:(0,v.jsx)(F.Z,{component:"div",count:C.length,onPageChange:function(e,t){f(t)},onRowsPerPageChange:function(e){_(parseInt(e.target.value))},page:p,rowsPerPage:m,rowsPerPageOptions:[5,10,25,30]})}),Y&&te&&(0,v.jsx)(j,{openModal:te,setModal:ne,data:Y,edit:!0})]})};J.defaultProps={categories:[]};var Q=J;var U=function(){var e=(0,o.useState)([]),t=(0,a.Z)(e,2),n=t[0],r=t[1];function i(){return(i=(0,u.Z)((0,d.Z)().mark((function e(){var t,n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.get("/categorias");case 2:t=e.sent,n=t.data,r(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.useEffect)((function(){!function(){i.apply(this,arguments)}()}),[]),(0,v.jsx)(w.Z,{children:(0,v.jsx)(Q,{categories:n||[],className:""})})};var $=function(){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.ql,{children:(0,v.jsx)("title",{children:"Produtos - Cadastrar"})}),(0,v.jsx)(y.Z,{children:(0,v.jsx)(_,{})}),(0,v.jsx)(C.Z,{maxWidth:"lg",children:(0,v.jsx)(i.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,children:(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(U,{})})})})]})}},74696:function(e,t,n){var r=n(95318);t.Z=void 0;var a=r(n(45649)),o=n(80184),i=(0,a.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddTwoTone");t.Z=i},31675:function(e,t,n){var r=n(95318);t.Z=void 0;var a=r(n(45649)),o=n(80184),i=(0,a.default)([(0,o.jsx)("path",{d:"M5 18.08V19h.92l9.06-9.06-.92-.92z",opacity:".3"},"0"),(0,o.jsx)("path",{d:"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83zM3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19z"},"1")],"EditTwoTone");t.Z=i},98243:function(e,t){t.Z={modal:"Modal_modal__5Lj9m",modal__divCloseButton:"Modal_modal__divCloseButton__tTZ3Y",modal__divCloseButton__closeButton:"Modal_modal__divCloseButton__closeButton__ABY0m",modal__closeButton:"Modal_modal__closeButton__ZDrqX",modalCategory:"Modal_modalCategory__IjrSy",modalCategory__divCloseButton:"Modal_modalCategory__divCloseButton__5mZKo",modalCategory__closeButton:"Modal_modalCategory__closeButton__fGLZH"}}}]);
//# sourceMappingURL=752.ca3be694.chunk.js.map